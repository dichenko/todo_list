(function(){"use strict";var t={5304:function(t,e,a){var s=a(3751),n=a(810),l=a(641);const i={id:"app"};function r(t,e,a,s,n,r){const o=(0,l.g2)("router-link"),u=(0,l.g2)("router-view");return(0,l.uX)(),(0,l.CE)("div",i,[(0,l.Lk)("nav",null,[(0,l.bF)(o,{to:"/"},{default:(0,l.k6)((()=>e[0]||(e[0]=[(0,l.eW)("Активные задачи")]))),_:1}),e[2]||(e[2]=(0,l.eW)(" | ")),(0,l.bF)(o,{to:"/deleted"},{default:(0,l.k6)((()=>e[1]||(e[1]=[(0,l.eW)("Удаленные задачи")]))),_:1})]),(0,l.bF)(u)])}a(4114),a(8111),a(2489);var o=a(8661);const u="user_id";async function c(){let t=localStorage.getItem(u);if(!t){const e=await o.Ay.load(),a=await e.get();t=`${a.visitorId}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,localStorage.setItem(u,t)}return t}var d=a(602);const k=10,v={ASC:"asc",DESC:"desc"},f="todo-app",p=1,T=(0,d.P2)(f,p,{upgrade(t){t.createObjectStore("tasks",{keyPath:"id"})}}),h=(0,n.nY)("tasks",{state:()=>({activeTasks:[],deletedTasks:[],userId:null}),actions:{async initialize(){this.userId=await c()},async loadActiveTasks(){const t=await T,e=await t.getAll("tasks");this.activeTasks=e.filter((t=>t.userId===this.userId&&"active"===t.status))},async loadDeletedTasks(){const t=await T,e=await t.getAll("tasks");this.deletedTasks=e.filter((t=>t.userId===this.userId&&"deleted"===t.status))},async addTask(t){const e=await T,a={id:Date.now().toString(),userId:this.userId,...t};await e.add("tasks",a),this.activeTasks.push(a)},async deleteTask(t){const e=await T,a=await e.get("tasks",t);a.status="deleted",a.deleteTime=new Date,await e.put("tasks",a),this.activeTasks=this.activeTasks.filter((e=>e.id!==t)),this.deletedTasks.push(a)}}});var g={name:"App",setup(){const t=h();t.initialize()}},w=a(6262);const m=(0,w.A)(g,[["render",r]]);var b=m,C=a(5220),L=a(33);const y={class:"active-tasks"},S={class:"task-input"},I={class:"tasks-list"},D=["onClick"];function E(t,e,a,n,i,r){return(0,l.uX)(),(0,l.CE)("div",y,[(0,l.Lk)("div",S,[(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>n.newTask=t),onKeyup:e[1]||(e[1]=(0,s.jR)(((...t)=>n.addTask&&n.addTask(...t)),["enter"])),placeholder:"Введите новую задачу"},null,544),[[s.Jo,n.newTask]]),(0,l.Lk)("button",{onClick:e[2]||(e[2]=(...t)=>n.addTask&&n.addTask(...t))},"Добавить")]),(0,l.Lk)("div",I,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(n.tasks,(t=>((0,l.uX)(),(0,l.CE)("div",{key:t.id,class:"task-item"},[(0,l.Lk)("span",null,(0,L.v_)(t.text),1),(0,l.Lk)("button",{onClick:e=>n.deleteTask(t.id),class:"delete-btn"},e[3]||(e[3]=[(0,l.Lk)("i",{class:"fas fa-trash"},null,-1)]),8,D)])))),128))])])}var A=a(953),x={name:"ActiveTasks",setup(){const t=h(),e=(0,A.KR)(""),a=(0,A.KR)([]);(0,l.sV)((async()=>{await t.loadActiveTasks(),a.value=t.activeTasks}));const s=async()=>{e.value.trim()&&(await t.addTask({text:e.value,status:"active",createTime:new Date,deleteTime:null}),e.value="",a.value=t.activeTasks)},n=async e=>{await t.deleteTask(e),a.value=t.activeTasks};return{newTask:e,tasks:a,addTask:s,deleteTask:n}}};const P=(0,w.A)(x,[["render",E]]);var _=P;const O={class:"deleted-tasks"},j={class:"pagination"},K=["disabled"],W=["disabled"];function F(t,e,a,s,n,i){return(0,l.uX)(),(0,l.CE)("div",O,[(0,l.Lk)("table",null,[(0,l.Lk)("thead",null,[(0,l.Lk)("tr",null,[(0,l.Lk)("th",{onClick:e[0]||(e[0]=t=>s.changeSort("text"))},[e[5]||(e[5]=(0,l.eW)(" Задача ")),(0,l.Lk)("i",{class:(0,L.C4)(s.getSortIcon("text"))},null,2)]),(0,l.Lk)("th",{onClick:e[1]||(e[1]=t=>s.changeSort("createTime"))},[e[6]||(e[6]=(0,l.eW)(" Дата создания ")),(0,l.Lk)("i",{class:(0,L.C4)(s.getSortIcon("createTime"))},null,2)]),(0,l.Lk)("th",{onClick:e[2]||(e[2]=t=>s.changeSort("deleteTime"))},[e[7]||(e[7]=(0,l.eW)(" Дата удаления ")),(0,l.Lk)("i",{class:(0,L.C4)(s.getSortIcon("deleteTime"))},null,2)])])]),(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(s.paginatedTasks,(t=>((0,l.uX)(),(0,l.CE)("tr",{key:t.id},[(0,l.Lk)("td",null,(0,L.v_)(t.text),1),(0,l.Lk)("td",null,(0,L.v_)(s.formatDate(t.createTime)),1),(0,l.Lk)("td",null,(0,L.v_)(s.formatDate(t.deleteTime)),1)])))),128))])]),(0,l.Lk)("div",j,[(0,l.Lk)("button",{disabled:1===s.currentPage,onClick:e[3]||(e[3]=t=>s.currentPage--)}," Назад ",8,K),(0,l.Lk)("span",null,(0,L.v_)(s.currentPage)+" / "+(0,L.v_)(s.totalPages),1),(0,l.Lk)("button",{disabled:s.currentPage===s.totalPages,onClick:e[4]||(e[4]=t=>s.currentPage++)}," Вперед ",8,W)])])}var X={name:"DeletedTasks",setup(){const t=h(),e=(0,A.KR)("deleteTime"),a=(0,A.KR)(v.DESC),s=(0,A.KR)(1),n=t=>{e.value===t?a.value=a.value===v.ASC?v.DESC:v.ASC:(e.value=t,a.value=v.DESC)},i=t=>e.value!==t?"fas fa-sort":a.value===v.ASC?"fas fa-sort-up":"fas fa-sort-down",r=(0,l.EW)((()=>{const n=(s.value-1)*k,l=[...t.deletedTasks].sort(((t,s)=>{let n=0;return n="text"===e.value?t.text.localeCompare(s.text):new Date(t[e.value])-new Date(s[e.value]),a.value===v.ASC?n:-n}));return l.slice(n,n+k)})),o=(0,l.EW)((()=>Math.ceil(t.deletedTasks.length/k)));(0,l.sV)((async()=>{await t.loadDeletedTasks()}));const u=t=>new Date(t).toLocaleString();return{sortField:e,currentPage:s,paginatedTasks:r,totalPages:o,formatDate:u,changeSort:n,getSortIcon:i}}};const R=(0,w.A)(X,[["render",F],["__scopeId","data-v-f70bd55c"]]);var V=R;const $=(0,C.aE)({history:(0,C.LA)(),routes:[{path:"/",name:"active",component:_},{path:"/deleted",name:"deleted",component:V}]});var z=$;const M=(0,s.Ef)(b),J=(0,n.Ey)();M.use(J),M.use(z),M.mount("#app")}},e={};function a(s){var n=e[s];if(void 0!==n)return n.exports;var l=e[s]={exports:{}};return t[s].call(l.exports,l,l.exports,a),l.exports}a.m=t,function(){var t=[];a.O=function(e,s,n,l){if(!s){var i=1/0;for(c=0;c<t.length;c++){s=t[c][0],n=t[c][1],l=t[c][2];for(var r=!0,o=0;o<s.length;o++)(!1&l||i>=l)&&Object.keys(a.O).every((function(t){return a.O[t](s[o])}))?s.splice(o--,1):(r=!1,l<i&&(i=l));if(r){t.splice(c--,1);var u=n();void 0!==u&&(e=u)}}return e}l=l||0;for(var c=t.length;c>0&&t[c-1][2]>l;c--)t[c]=t[c-1];t[c]=[s,n,l]}}(),function(){a.d=function(t,e){for(var s in e)a.o(e,s)&&!a.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={524:0};a.O.j=function(e){return 0===t[e]};var e=function(e,s){var n,l,i=s[0],r=s[1],o=s[2],u=0;if(i.some((function(e){return 0!==t[e]}))){for(n in r)a.o(r,n)&&(a.m[n]=r[n]);if(o)var c=o(a)}for(e&&e(s);u<i.length;u++)l=i[u],a.o(t,l)&&t[l]&&t[l][0](),t[l]=0;return a.O(c)},s=self["webpackChunktodo_list"]=self["webpackChunktodo_list"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=a.O(void 0,[504],(function(){return a(5304)}));s=a.O(s)})();
//# sourceMappingURL=app.07ec1fe2.js.map